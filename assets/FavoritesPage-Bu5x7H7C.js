import{V as I,O as S,l as g,j as o,I as C,Q as F,J as L,B as m,T as h,H as T,a as k,W as E,X as M,u as P,r as j,Y as R,C as D,Z as _,G as f,M as y}from"./main-B8WG6TEV.js";import{u as A,a as B,F as G,C as O}from"./hooks-CbbL_4NG.js";import{C as $,a as Y,b as z}from"./CardMedia-DzvU51d2.js";import{P as W,R as H}from"./ReactGoogleMap-Mo6sXA7X.js";import{C as J}from"./Chip-Cs3laU7D.js";import{S as w}from"./Section-BtqGn3A7.js";import{P as N}from"./PageHeader-BwE9L6F5.js";import"./Directions-bpIplUsC.js";import"./Park-Dv0aAGIh.js";import"./Hotel-CX7sYDiW.js";const b="houston_guide_theme",x="houston_guide_favorites",V=()=>{var e,s;try{const t=localStorage.getItem(b),i=((s=(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)"))==null?void 0:s.matches)||!1;return t==="light"||t==="dark"?t:i?"dark":"light"}catch(t){return console.error("Error accessing localStorage for theme:",t),"light"}},U=()=>{try{const e=localStorage.getItem(x);return e?JSON.parse(e):[]}catch(e){return console.error("Error accessing localStorage for favorites:",e),[]}},K={theme:"light",favoriteLocations:[],isLoaded:!1},Q=I({name:"userPreferences",initialState:K,reducers:{initializePreferences:e=>{e.theme=V(),e.favoriteLocations=U(),e.isLoaded=!0},toggleTheme:e=>{e.theme=e.theme==="light"?"dark":"light";try{localStorage.setItem(b,e.theme)}catch(s){console.error("Error saving theme to localStorage:",s)}},addFavorite:(e,s)=>{const t=s.payload;if(!e.favoriteLocations.some(i=>i.id===t.id)){e.favoriteLocations.push(t);try{localStorage.setItem(x,JSON.stringify(e.favoriteLocations))}catch(i){console.error("Error saving favorites to localStorage:",i)}}},removeFavorite:(e,s)=>{const t=s.payload;e.favoriteLocations=e.favoriteLocations.filter(i=>i.id!==t);try{localStorage.setItem(x,JSON.stringify(e.favoriteLocations))}catch(i){console.error("Error saving favorites to localStorage:",i)}}}}),{initializePreferences:he,toggleTheme:fe,addFavorite:X,removeFavorite:Z}=Q.actions,q=(e,s)=>e.userPreferences.favoriteLocations.some(t=>t.id===s),ee=({location:e,size:s="medium",showTooltip:t=!0,color:i="error"})=>{const c=A(),n=B(l=>q(l,e.id)),a=S(),{isMobile:d}=g(),p=l=>{l.stopPropagation(),c(n?Z(e.id):X(e))},r=o.jsx(C,{onClick:p,size:s,"aria-label":n?"Remove from favorites":"Add to favorites",sx:{color:n?a.palette[i].main:"inherit",transition:a.transitions.create(["color"],{duration:a.transitions.duration.short})},children:n?o.jsx(F,{}):o.jsx(G,{})});return!t||d?r:o.jsx(L,{title:n?"Remove from favorites":"Add to favorites",children:r})},oe=({location:e,onClick:s,onGetDirections:t,selected:i=!1})=>{const{isMobile:c}=g(),n=()=>{s&&s(e)},a=d=>{d.stopPropagation(),t?t(e):e.address?window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e.address)}`,"_blank"):e.position&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${e.position.lat},${e.position.lng}`,"_blank")};return o.jsxs($,{sx:{display:"flex",flexDirection:c?"column":"row",cursor:s?"pointer":"default","&:hover":{boxShadow:s?3:1},...i&&{border:"2px solid",borderColor:"primary.main"}},onClick:n,children:[e.image?o.jsx(Y,{component:"img",sx:{width:c?"100%":150,height:c?140:150,objectFit:"cover"},image:e.image,alt:e.name}):o.jsx(m,{sx:{width:c?"100%":150,height:c?140:150,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"action.hover"},children:o.jsx(W,{sx:{fontSize:48,color:"text.secondary"}})}),o.jsxs(m,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[o.jsxs(z,{children:[o.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsx(h,{variant:"h6",component:"div",sx:{pr:2},children:e.name}),o.jsx(ee,{location:e,size:"small"})]}),o.jsx(J,{label:e.category,size:"small",sx:{textTransform:"capitalize",mb:1}}),e.address&&o.jsx(h,{variant:"body2",color:"text.secondary",children:e.address}),e.description&&o.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description})]}),o.jsx(m,{sx:{flexGrow:1}}),o.jsx(T,{}),o.jsx(O,{children:o.jsx(k,{size:"small",startIcon:o.jsx(E,{}),onClick:a,children:"Directions"})})]})]})},te=M,xe=()=>{const{t:e}=P(),{isMobile:s}=g(),[t,i]=j.useState(null),n=te(R).map(r=>({...r,position:r.position||{lat:0,lng:0},category:r.category||"Unknown"})),a=j.useMemo(()=>t,[t]),d=r=>{var v,u;const l=r.address?encodeURIComponent(r.address):(v=r.position)!=null&&v.lat&&((u=r.position)!=null&&u.lng)?`${r.position.lat},${r.position.lng}`:null;l?window.open(`https://www.google.com/maps/dir/?api=1&destination=${l}`,"_blank"):console.error("No valid destination for the selected location.")},p=r=>{i(r)};return o.jsxs(D,{maxWidth:"lg",children:[o.jsx(N,{title:e("favorites.title","Favorite Locations"),subtitle:e("favorites.subtitle","Your saved locations in Houston"),"data-testid":"favorites-page-title"}),n.length===0?o.jsx(_,{severity:"info",sx:{mb:4},children:e("favorites.noFavorites","You haven't added any favorite locations yet. Browse the map or search for locations to add them to your favorites.")}):o.jsxs(f,{container:!0,spacing:3,children:[o.jsx(f,{item:!0,xs:12,md:6,children:o.jsx(w,{title:e("favorites.yourFavorites","Your Favorites"),titleIcon:o.jsx(y,{color:"primary"}),children:o.jsx(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:n.map(r=>o.jsx(oe,{location:r,onClick:p,onGetDirections:d,selected:(a==null?void 0:a.id)===r.id},r.id))})})}),o.jsx(f,{item:!0,xs:12,md:6,children:o.jsx(w,{title:e("favorites.mapView","Map View"),titleIcon:o.jsx(y,{color:"primary"}),children:o.jsx(H,{locations:a?[a]:n,height:s?400:600,mapId:"af8bf941f1e27c9d",zoom:a?15:11,center:a==null?void 0:a.position,useCustomIcons:!0})})})]})]})};export{xe as default};
//# sourceMappingURL=FavoritesPage-Bu5x7H7C.js.map
